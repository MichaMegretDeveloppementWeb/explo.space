import{L as a}from"./leaflet-src-CT8H3qYi.js";import{c as i}from"./marker-icon-utils-DgwIB2GN.js";class s{constructor(t,e,r){this.containerId=t,this.latitude=e,this.longitude=r,this.map=null,this.marker=null,this.initMap()}initMap(){try{this.map=a.map(this.containerId,{center:[this.latitude,this.longitude],zoom:8,dragging:!0,touchZoom:!0,scrollWheelZoom:!0,doubleClickZoom:!0,boxZoom:!0,keyboard:!0,zoomControl:!0,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1});const t=a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',subdomains:["a","b","c","d"],maxZoom:19,minZoom:1});t.on("tileerror",()=>{console.warn("CartoDB tiles failed, switching to OSM fallback"),this.map.removeLayer(t),a.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',subdomains:["a","b","c","d"],maxZoom:19,minZoom:1}).addTo(this.map)}),t.addTo(this.map),this.marker=a.marker([this.latitude,this.longitude],{icon:i(),draggable:!1}).addTo(this.map)}catch(t){console.error("✗ Erreur lors de l'initialisation de LocationPreview:",t)}}destroy(){this.map&&(this.map.remove(),this.map=null,this.marker=null)}}document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("place-location-preview");if(o){const t=parseFloat(o.dataset.latitude),e=parseFloat(o.dataset.longitude);!isNaN(t)&&!isNaN(e)?new s("place-location-preview",t,e):console.warn("Coordonnées GPS invalides pour la prévisualisation de carte")}});
