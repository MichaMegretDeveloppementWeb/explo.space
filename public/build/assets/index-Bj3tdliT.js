import{L as i}from"./leaflet-src-CT8H3qYi.js";import{c as b}from"./marker-icon-utils-DgwIB2GN.js";let a=0,r=[],u=0,p=0;function w(){const t=document.getElementById("photoGalleryModal"),o=t?.dataset.photos;if(!o){console.warn("No photos data found");return}try{r=JSON.parse(o)}catch(n){console.error("Failed to parse photos data:",n);return}document.addEventListener("keydown",E),t&&(t.addEventListener("touchstart",M,{passive:!0}),t.addEventListener("touchend",v,{passive:!0})),window.openPhotoGallery=x,window.closePhotoGallery=h,window.navigatePhoto=l}function x(t){a=t;const o=document.getElementById("photoGalleryModal");o.classList.remove("hidden"),document.body.style.overflow="hidden",y(!1),setTimeout(()=>{o.style.opacity="1"},10)}function h(){const t=document.getElementById("photoGalleryModal");t.style.opacity="0",setTimeout(()=>{t.classList.add("hidden"),document.body.style.overflow=""},300)}function l(t){t==="next"?a=(a+1)%r.length:t==="prev"&&(a=(a-1+r.length)%r.length),y(!0,t)}function y(t=!0,o=null){const n=r[a],e=document.getElementById("modalPhoto"),c=document.getElementById("photoCounter");if(!n||!e)return;if(t&&o){const f=o==="next"?"-translate-x-20":"translate-x-20";e.style.transform=f,e.style.opacity="0",e.style.transition="transform 0.3s ease, opacity 0.3s ease",setTimeout(()=>{e.src=n.url,e.alt=`Photo ${a+1}`;const g=o==="next"?"translate-x-20":"-translate-x-20";e.style.transform=g,e.style.opacity="0",e.offsetWidth,setTimeout(()=>{e.style.transform="translate-x-0",e.style.opacity="1"},10)},300)}else e.src=n.url,e.alt=`Photo ${a+1}`,e.style.transform="translate-x-0",e.style.opacity="1",e.style.transition="transform 0.3s ease, opacity 0.3s ease";c&&(c.textContent=`${a+1} / ${r.length}`);const d=document.getElementById("prevPhoto"),m=document.getElementById("nextPhoto");d&&m&&(d.style.display="block",m.style.display="block")}function E(t){if(!document.getElementById("photoGalleryModal")?.classList.contains("hidden"))switch(t.key){case"Escape":h();break;case"ArrowLeft":l("prev");break;case"ArrowRight":l("next");break}}function M(t){t.target.closest("button")||(u=t.changedTouches[0].screenX)}function v(t){t.target.closest("button")||(p=t.changedTouches[0].screenX,P())}function P(){const o=u-p;Math.abs(o)<50||(o>0?l("next"):l("prev"))}let s=null;function T(){const t=document.getElementById("placeMap");if(!t){console.warn("Map container not found");return}const o=parseFloat(t.dataset.latitude),n=parseFloat(t.dataset.longitude);if(t.dataset.title,isNaN(o)||isNaN(n)){console.error("Invalid coordinates");return}s=i.map("placeMap",{center:[o,n],zoom:10,zoomControl:!0,scrollWheelZoom:!0,dragging:!0}),I(),i.marker([o,n],{icon:b()}).addTo(s)}function I(){const t={url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',subdomains:["a","b","c","d"],maxZoom:19,minZoom:2},o={url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',maxZoom:19,minZoom:2},n=i.tileLayer(t.url,{attribution:t.attribution,subdomains:t.subdomains,maxZoom:t.maxZoom,minZoom:t.minZoom});n.on("tileerror",()=>{console.warn("CartoDB tiles failed, switching to OSM fallback"),s.removeLayer(n),i.tileLayer(o.url,{attribution:o.attribution,maxZoom:o.maxZoom,minZoom:o.minZoom}).addTo(s)}),n.addTo(s)}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("photoGalleryModal")&&w(),document.getElementById("placeMap")&&T()});
