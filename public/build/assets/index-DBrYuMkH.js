import{R as n}from"./recaptcha-service-C60lUiXK.js";class s{constructor(e="#photo-drop-zone",o="#photos"){this.dropZone=null,this.fileInput=null,this.dropZoneSelector=e,this.inputSelector=o,this.init()}init(){if(this.dropZone=document.querySelector(this.dropZoneSelector),this.fileInput=document.querySelector(this.inputSelector),!this.dropZone||!this.fileInput){console.warn("PhotoUploader: Drop zone or file input not found");return}this.setupEventListeners(),this.addStyles()}setupEventListeners(){["dragenter","dragover","dragleave","drop"].forEach(e=>{document.addEventListener(e,this.preventDefaults,!1)}),["dragenter","dragover"].forEach(e=>{this.dropZone.addEventListener(e,()=>this.highlight(),!1)}),["dragleave","drop"].forEach(e=>{this.dropZone.addEventListener(e,()=>this.unhighlight(),!1)}),this.dropZone.addEventListener("drop",e=>this.handleDrop(e),!1),this.dropZone.addEventListener("click",e=>{e.target.tagName==="LABEL"||e.target.tagName==="INPUT"||this.fileInput.click()})}preventDefaults(e){e.preventDefault(),e.stopPropagation()}highlight(){this.dropZone.classList.add("drop-zone-active")}unhighlight(){this.dropZone.classList.remove("drop-zone-active")}handleDrop(e){const t=e.dataTransfer.files;this.handleFiles(t)}handleFiles(e){const o=Array.from(e),t=new DataTransfer;o.forEach(i=>{t.items.add(i)}),this.fileInput.files=t.files,this.fileInput.dispatchEvent(new Event("input",{bubbles:!0})),this.fileInput.dispatchEvent(new Event("change",{bubbles:!0})),console.log(`PhotoUploader: ${o.length} file(s) selected via drag & drop`)}addStyles(){if(document.getElementById("photo-uploader-styles"))return;const e=document.createElement("style");e.id="photo-uploader-styles",e.textContent=`
            .drop-zone-active {
                border-color: #3b82f6 !important;
                background-color: #eff6ff !important;
            }

            .drop-zone-active svg {
                color: #3b82f6 !important;
            }
        `,document.head.appendChild(e)}destroy(){this.dropZone&&["dragenter","dragover","dragleave","drop"].forEach(e=>{this.dropZone.removeEventListener(e,this.preventDefaults)})}}class a{constructor(){this.uploader=null,this.observer=null,this.recaptcha=n}init(){console.log("ðŸ“¸ Photo Suggestion Form: Initializing..."),this.initializeRecaptcha(),this.observeDropZone(),console.log("âœ… Photo Suggestion Form: Initialization complete")}initializeRecaptcha(){try{this.recaptcha.init()?console.log("âœ… reCAPTCHA initialized for PhotoSuggestion"):console.warn("âš ï¸ Failed to initialize reCAPTCHA for PhotoSuggestion")}catch(e){console.error("âŒ Failed to initialize reCAPTCHA:",e)}}initializePhotoUploader(){const e=document.querySelector("#photo-drop-zone"),o=document.querySelector("#photos");if(e&&o&&!e.dataset.initialized)try{console.log("âœ… Initializing photo uploader"),this.uploader=new s("#photo-drop-zone","#photos"),e.dataset.initialized="true",this.observer&&(this.observer.disconnect(),this.observer=null),console.log("âœ… Photo uploader initialized")}catch(t){console.error("âŒ Failed to initialize photo uploader:",t)}}observeDropZone(){this.observer&&this.observer.disconnect(),this.observer=new MutationObserver(o=>{for(const t of o)for(const i of t.addedNodes)if(i.nodeType===Node.ELEMENT_NODE){if(i.id==="photo-drop-zone"){console.log("ðŸ“¸ Drop zone detected in DOM"),this.initializePhotoUploader();return}if(i.querySelector&&i.querySelector("#photo-drop-zone")){console.log("ðŸ“¸ Drop zone detected in DOM (nested)"),this.initializePhotoUploader();return}}}),this.observer.observe(document.body,{childList:!0,subtree:!0}),console.log("ðŸ‘€ Drop zone observer started"),document.querySelector("#photo-drop-zone")&&(console.log("ðŸ“¸ Drop zone already in DOM"),this.initializePhotoUploader())}}document.addEventListener("DOMContentLoaded",()=>{new a().init()});
